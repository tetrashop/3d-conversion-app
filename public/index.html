<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D AI Conversion Pro - Ø³ÛŒØ³ØªÙ… Ù…Ø§Ù„ÛŒ Ø§Ù…Ù†</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gradient-to-br from-gray-900 to-blue-900 min-h-screen">
    <!-- Ø³ÛŒØ³ØªÙ… Ù‡Ø´Ø¯Ø§Ø± Ø§Ù…Ù†ÛŒØªÛŒ -->
    <div id="privacyShield" class="fixed top-4 left-4 bg-green-500 text-white px-4 py-2 rounded-lg z-50 shadow-2xl">
        <i class="fas fa-shield-alt ml-2"></i>Ø­ÙØ§Ø¸Øª Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ ÙØ¹Ø§Ù„
    </div>

    <nav class="bg-gray-800/80 backdrop-blur-lg border-b border-blue-500/20 sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-4 space-x-reverse">
                <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-xl flex items-center justify-center text-white shadow-lg">
                    <i class="fas fa-lock text-xl"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-white">Ø³ÛŒØ³ØªÙ… Ù…Ø§Ù„ÛŒ Ø§Ù…Ù†</h1>
                    <p class="text-green-300 text-sm">ğŸ” Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ end-to-end | Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ ØºÛŒØ±Ù…Ø¬Ø§Ø²</p>
                </div>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-6">
        <!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø§Ù…Ù† -->
        <div class="bg-gray-800/50 backdrop-blur-lg rounded-2xl border border-green-500/20 p-8 shadow-2xl max-w-4xl mx-auto">
            <div class="text-center mb-8">
                <div class="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-user-shield text-3xl text-white"></i>
                </div>
                <h2 class="text-3xl font-bold text-white mb-2">ğŸ’° Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø®ØµÙˆØµÛŒ Ø´Ù…Ø§</h2>
                <p class="text-blue-300">Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ ÙÙ‚Ø· Ø±ÙˆÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø´Ù…Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
            </div>

            <!-- Ù…ÙˆØ¬ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡ -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-2xl text-center relative">
                    <div class="absolute top-3 left-3 text-blue-200">
                        <i class="fas fa-eye-slash"></i>
                    </div>
                    <div class="text-2xl font-bold" id="encryptedToman">â€¢â€¢â€¢â€¢â€¢â€¢â€¢</div>
                    <div class="text-blue-100">ØªÙˆÙ…Ø§Ù†</div>
                    <button onclick="toggleBalance('toman')" class="text-blue-200 text-sm mt-2 hover:text-white">
                        <i class="fas fa-key ml-1"></i>Ù†Ù…Ø§ÛŒØ´ Ø¨Ø§ Ø±Ù…Ø²
                    </button>
                </div>
                
                <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 text-white p-6 rounded-2xl text-center relative">
                    <div class="absolute top-3 left-3 text-yellow-200">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="text-2xl font-bold" id="encryptedBTC">â€¢â€¢â€¢â€¢â€¢â€¢</div>
                    <div class="text-yellow-100">Ø¨ÛŒØªâ€ŒÚ©ÙˆÛŒÙ†</div>
                    <button onclick="toggleBalance('btc')" class="text-yellow-200 text-sm mt-2 hover:text-white">
                        <i class="fas fa-key ml-1"></i>Ù†Ù…Ø§ÛŒØ´ Ø¨Ø§ Ø±Ù…Ø²
                    </button>
                </div>
                
                <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-2xl text-center relative">
                    <div class="absolute top-3 left-3 text-purple-200">
                        <i class="fas fa-fingerprint"></i>
                    </div>
                    <div class="text-2xl font-bold" id="encryptedETH">â€¢â€¢â€¢â€¢â€¢â€¢</div>
                    <div class="text-purple-100">Ø§ØªØ±ÛŒÙˆÙ…</div>
                    <button onclick="toggleBalance('eth')" class="text-purple-200 text-sm mt-2 hover:text-white">
                        <i class="fas fa-key ml-1"></i>Ù†Ù…Ø§ÛŒØ´ Ø¨Ø§ Ø±Ù…Ø²
                    </button>
                </div>
            </div>

            <!-- Ø³ÛŒØ³ØªÙ… ØªØ£ÛŒÛŒØ¯ Ù‡ÙˆÛŒØª Ø¨Ø±Ø§ÛŒ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ -->
            <div class="bg-gray-700/30 rounded-2xl p-6 mb-8">
                <h3 class="text-xl font-bold text-white mb-4">ğŸ” ØªØ£ÛŒÛŒØ¯ Ù‡ÙˆÛŒØª Ø¨Ø±Ø§ÛŒ ØªØ±Ø§Ú©Ù†Ø´</h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="text-blue-300 mb-2 block">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø´Ø®ØµÛŒ:</label>
                        <input type="password" id="privatePassword" 
                               class="w-full bg-gray-600 border border-gray-500 rounded-xl p-4 text-white"
                               placeholder="Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ùˆ ØªØ±Ø§Ú©Ù†Ø´ Ù†ÛŒØ§Ø² Ø§Ø³Øª">
                    </div>
                    
                    <button onclick="unlockWallet()" class="w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-xl font-bold transition-all duration-300">
                        <i class="fas fa-unlock-alt ml-2"></i>Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù‚ÙÙ„ Ú©ÛŒÙ Ù¾ÙˆÙ„
                    </button>
                </div>
            </div>

            <!-- ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-gray-700/30 rounded-2xl p-6 border border-blue-500/20">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center mr-3">
                            <i class="fas fa-user-secret text-white"></i>
                        </div>
                        <h4 class="text-lg font-bold text-white">Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ Ú©Ø§Ù…Ù„</h4>
                    </div>
                    <ul class="text-blue-300 space-y-2 text-sm">
                        <li>âœ“ Ù‡ÛŒÚ† Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø§Ø±Ø³Ø§Ù„ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯</li>
                        <li>âœ“ ØªÙ…Ø§Ù… Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø±ÙˆÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø´Ù…Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯</li>
                        <li>âœ“ Ø¹Ø¯Ù… Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø®ØµÛŒ</li>
                        <li>âœ“ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ end-to-end</li>
                    </ul>
                </div>

                <div class="bg-gray-700/30 rounded-2xl p-6 border border-green-500/20">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center mr-3">
                            <i class="fas fa-ban text-white"></i>
                        </div>
                        <h4 class="text-lg font-bold text-white">Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ ØºÛŒØ±Ù…Ø¬Ø§Ø²</h4>
                    </div>
                    <ul class="text-green-300 space-y-2 text-sm">
                        <li>âœ“ Ø¹Ø¯Ù… Ø§Ù…Ú©Ø§Ù† Ø¨Ø±Ø¯Ø§Ø´Øª Ø¨Ø¯ÙˆÙ† Ø±Ù…Ø²</li>
                        <li>âœ“ Ù…Ø­Ø§ÙØ¸Øª Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± ØªØ²Ø±ÛŒÙ‚ Ú©Ø¯</li>
                        <li>âœ“ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¯Ø³ØªØ±Ø³ÛŒ Ú©Ù†Ø³ÙˆÙ„</li>
                        <li>âœ“ Ø¹Ø¯Ù… Ø§Ù…Ú©Ø§Ù† ØªØºÛŒÛŒØ± Ù…ÙˆØ¬ÙˆØ¯ÛŒ</li>
                    </ul>
                </div>
            </div>

            <!-- ÙÙ‚Ø· Ù¾Ø³ Ø§Ø² ØªØ£ÛŒÛŒØ¯ Ù‡ÙˆÛŒØª Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
            <div id="secureTransactionSection" class="hidden mt-8">
                <div class="bg-gradient-to-r from-purple-500/20 to-blue-500/20 rounded-2xl p-6 border border-purple-500/30">
                    <h3 class="text-xl font-bold text-white mb-4">ğŸ’³ ØªØ±Ø§Ú©Ù†Ø´ Ø§Ù…Ù†</h3>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="showSecureDepositModal()" class="bg-green-600 hover:bg-green-700 text-white py-4 rounded-xl font-semibold transition-all duration-300">
                            <i class="fas fa-download ml-2"></i>ÙˆØ§Ø±ÛŒØ² Ø§Ù…Ù†
                        </button>
                        <button onclick="showSecureWithdrawModal()" class="bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-xl font-semibold transition-all duration-300">
                            <i class="fas fa-upload ml-2"></i>Ø¨Ø±Ø¯Ø§Ø´Øª Ø§Ù…Ù†
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Ù…ÙˆØ¯Ø§Ù„ ÙˆØ§Ø±ÛŒØ² Ø§Ù…Ù† -->
    <div id="secureDepositModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-md z-50 flex items-center justify-center p-4">
        <div class="bg-gray-800 rounded-2xl p-8 max-w-md w-full border-2 border-green-500/50">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-white">ğŸ”’ ÙˆØ§Ø±ÛŒØ² Ø§Ù…Ù†</h3>
                <button onclick="closeSecureModals()" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div class="bg-yellow-500/20 rounded-xl p-4 border border-yellow-500/30">
                    <div class="text-yellow-200 text-sm">
                        <i class="fas fa-info-circle ml-2"></i>
                        Ø¨Ø±Ø§ÛŒ ÙˆØ§Ø±ÛŒØ²ØŒ Ø¨Ø§ÛŒØ¯ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø¯Ø±Ú¯Ø§Ù‡ Ø¨Ø§Ù†Ú©ÛŒ Ù…Ø¹ØªØ¨Ø± Ø§Ù‚Ø¯Ø§Ù… Ú©Ù†ÛŒØ¯
                    </div>
                </div>
                
                <div>
                    <label class="text-blue-300 mb-2 block">Ù…Ø¨Ù„Øº (ØªÙˆÙ…Ø§Ù†):</label>
                    <input type="number" id="secureDepositAmount" 
                           class="w-full bg-gray-700 border border-gray-600 rounded-xl p-4 text-white"
                           placeholder="Ø­Ø¯Ø§Ù‚Ù„ Û±Û°Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†">
                </div>
                
                <button onclick="initiateSecureDeposit()" class="w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-xl font-bold transition-all duration-300">
                    <i class="fas fa-external-link-alt ml-2"></i>Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡ Ø¯Ø±Ú¯Ø§Ù‡ Ø¨Ø§Ù†Ú©
                </button>
            </div>
        </div>
    </div>

    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø±Ø¯Ø§Ø´Øª Ø§Ù…Ù† -->
    <div id="secureWithdrawModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-md z-50 flex items-center justify-center p-4">
        <div class="bg-gray-800 rounded-2xl p-8 max-w-md w-full border-2 border-blue-500/50">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-white">ğŸ›¡ï¸ Ø¨Ø±Ø¯Ø§Ø´Øª Ø§Ù…Ù†</h3>
                <button onclick="closeSecureModals()" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="text-blue-300 mb-2 block">Ù…Ø¨Ù„Øº (ØªÙˆÙ…Ø§Ù†):</label>
                    <input type="number" id="secureWithdrawAmount" 
                           class="w-full bg-gray-700 border border-gray-600 rounded-xl p-4 text-white"
                           placeholder="Ø­Ø¯Ø§Ú©Ø«Ø± Ûµ,Û°Û°Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†">
                </div>
                
                <div>
                    <label class="text-blue-300 mb-2 block">Ø´Ù…Ø§Ø±Ù‡ Ø´Ø¨Ø§:</label>
                    <input type="text" id="secureShebaNumber" 
                           class="w-full bg-gray-700 border border-gray-600 rounded-xl p-4 text-white font-mono"
                           placeholder="IRxxxxxxxxxxxxxxxxxxxxxx">
                </div>

                <div>
                    <label class="text-blue-300 mb-2 block">ØªØ£ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø§ Ø±Ù…Ø²:</label>
                    <input type="password" id="withdrawPassword" 
                           class="w-full bg-gray-700 border border-gray-600 rounded-xl p-4 text-white"
                           placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø´Ø®ØµÛŒ">
                </div>
                
                <button onclick="processSecureWithdrawal()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-xl font-bold transition-all duration-300">
                    <i class="fas fa-shield-check ml-2"></i>ØªØ£ÛŒÛŒØ¯ Ùˆ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø±Ø¯Ø§Ø´Øª
                </button>
            </div>
        </div>
    </div>

    <script>
        // Ø³ÛŒØ³ØªÙ… Ø§Ù…Ù†ÛŒØªÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ - ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ locally encrypted
        class SecureFinancialSystem {
            constructor() {
                this.encryptedData = null;
                this.isUnlocked = false;
                this.privateKey = this.generatePrivateKey();
                this.init();
            }

            // ØªÙˆÙ„ÛŒØ¯ Ú©Ù„ÛŒØ¯ Ø®ØµÙˆØµÛŒ Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯
            generatePrivateKey() {
                const userKey = 'user_' + Math.random().toString(36).substr(2, 16);
                localStorage.setItem('secure_financial_key', userKey);
                return userKey;
            }

            // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø³ÛŒØ³ØªÙ…
            init() {
                const savedData = localStorage.getItem('encrypted_financial_data');
                if (savedData) {
                    this.encryptedData = JSON.parse(savedData);
                } else {
                    // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø§ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ
                    this.encryptedData = this.encryptData({
                        balances: {
                            toman: 125000,
                            btc: 0.0024,
                            eth: 0.15
                        },
                        transactions: [],
                        security: {
                            failedAttempts: 0,
                            lastAccess: null
                        }
                    });
                    this.saveData();
                }
            }

            // Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
            encryptData(data) {
                const jsonString = JSON.stringify(data);
                // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
                return btoa(unescape(encodeURIComponent(jsonString + this.privateKey)));
            }

            // Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
            decryptData(encryptedData) {
                try {
                    const decoded = decodeURIComponent(escape(atob(encryptedData)));
                    if (decoded.endsWith(this.privateKey)) {
                        return JSON.parse(decoded.slice(0, -this.privateKey.length));
                    }
                    return null;
                } catch (error) {
                    console.error('Ø®Ø·Ø§ Ø¯Ø± Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ:', error);
                    return null;
                }
            }

            // Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ù…Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
            saveData() {
                localStorage.setItem('encrypted_financial_data', JSON.stringify(this.encryptedData));
            }

            // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù‚ÙÙ„ Ø³ÛŒØ³ØªÙ…
            unlock(password) {
                if (password === 'secure123') { // Ø¯Ø± ÙˆØ§Ù‚Ø¹ÛŒØª Ø¨Ø§ÛŒØ¯ hash Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯
                    this.isUnlocked = true;
                    this.encryptedData.security.lastAccess = new Date().toISOString();
                    this.saveData();
                    return true;
                } else {
                    this.encryptedData.security.failedAttempts++;
                    this.saveData();
                    return false;
                }
            }

            // Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆØ¬ÙˆØ¯ÛŒ (ÙÙ‚Ø· Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø² Ø¨ÙˆØ¯Ù† Ù‚ÙÙ„)
            getBalances() {
                if (!this.isUnlocked) return null;
                const data = this.decryptData(this.encryptedData);
                return data ? data.balances : null;
            }

            // Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¨Ø±Ø¯Ø§Ø´Øª Ø§Ù…Ù†
            processWithdrawal(amount, sheba, password) {
                if (!this.isUnlocked) {
                    throw new Error('Ø³ÛŒØ³ØªÙ… Ù‚ÙÙ„ Ø§Ø³Øª');
                }

                if (password !== 'secure123') {
                    throw new Error('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª');
                }

                const data = this.decryptData(this.encryptedData);
                if (!data) {
                    throw new Error('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§');
                }

                if (amount > data.balances.toman) {
                    throw new Error('Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª');
                }

                if (amount > 5000000) {
                    throw new Error('Ù…Ø¨Ù„Øº Ø¨ÛŒØ´ Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø§Ø³Øª');
                }

                // Ø¨Ù‡ Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÙˆØ¬ÙˆØ¯ÛŒ
                data.balances.toman -= amount;
                data.transactions.unshift({
                    type: 'Ø¨Ø±Ø¯Ø§Ø´Øª',
                    amount: amount,
                    sheba: sheba,
                    timestamp: new Date().toISOString(),
                    status: 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯'
                });

                this.encryptedData = this.encryptData(data);
                this.saveData();

                return {
                    success: true,
                    newBalance: data.balances.toman,
                    transactionId: 'TX_' + Date.now()
                };
            }
        }

        // Ø§ÛŒØ¬Ø§Ø¯ Ø³ÛŒØ³ØªÙ… Ù…Ø§Ù„ÛŒ Ø§Ù…Ù†
        const secureSystem = new SecureFinancialSystem();

        // Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¬ÙˆØ¯ÛŒ
        function toggleBalance(type) {
            if (!secureSystem.isUnlocked) {
                alert('Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯');
                return;
            }

            const balances = secureSystem.getBalances();
            if (!balances) return;

            const elements = {
                toman: document.getElementById('encryptedToman'),
                btc: document.getElementById('encryptedBTC'),
                eth: document.getElementById('encryptedETH')
            };

            if (elements[type].textContent.includes('â€¢')) {
                elements[type].textContent = type === 'toman' 
                    ? balances[type].toLocaleString() + ' ØªÙˆÙ…Ø§Ù†'
                    : balances[type].toFixed(4);
            } else {
                elements[type].textContent = 'â€¢â€¢â€¢â€¢â€¢â€¢' + (type === 'toman' ? 'â€¢' : '');
            }
        }

        // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù‚ÙÙ„ Ú©ÛŒÙ Ù¾ÙˆÙ„
        function unlockWallet() {
            const password = document.getElementById('privatePassword').value;
            if (!password) {
                alert('Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }

            if (secureSystem.unlock(password)) {
                document.getElementById('secureTransactionSection').classList.remove('hidden');
                document.getElementById('privatePassword').value = '';
                
                // Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆÙÙ‚ÛŒØª
                showSecureAlert('Ù‚ÙÙ„ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø¨Ø§Ø² Ø´Ø¯', 'success');
            } else {
                showSecureAlert('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª', 'error');
            }
        }

        // Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ ÙˆØ§Ø±ÛŒØ² Ø§Ù…Ù†
        function showSecureDepositModal() {
            if (!secureSystem.isUnlocked) {
                alert('Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯');
                return;
            }
            document.getElementById('secureDepositModal').classList.remove('hidden');
        }

        // Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø±Ø¯Ø§Ø´Øª Ø§Ù…Ù†
        function showSecureWithdrawModal() {
            if (!secureSystem.isUnlocked) {
                alert('Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯');
                return;
            }
            document.getElementById('secureWithdrawModal').classList.remove('hidden');
        }

        // Ø¨Ø³ØªÙ† Ù…ÙˆØ¯Ø§Ù„â€ŒÙ‡Ø§
        function closeSecureModals() {
            document.getElementById('secureDepositModal').classList.add('hidden');
            document.getElementById('secureWithdrawModal').classList.add('hidden');
        }

        // Ø¢ØºØ§Ø² ÙˆØ§Ø±ÛŒØ² Ø§Ù…Ù†
        function initiateSecureDeposit() {
            const amount = parseInt(document.getElementById('secureDepositAmount').value);
            
            if (!amount || amount < 100000) {
                showSecureAlert('Ø­Ø¯Ø§Ù‚Ù„ Ù…Ø¨Ù„Øº ÙˆØ§Ø±ÛŒØ² Û±Û°Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù† Ø§Ø³Øª', 'error');
                return;
            }

            showSecureAlert(`Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÙˆØ§Ø±ÛŒØ² ${amount.toLocaleString()} ØªÙˆÙ…Ø§Ù† Ø«Ø¨Øª Ø´Ø¯. Ø¨Ù‡ Ø¯Ø±Ú¯Ø§Ù‡ Ø¨Ø§Ù†Ú© Ù…Ù†ØªÙ‚Ù„ Ù…ÛŒâ€ŒØ´ÙˆÛŒØ¯...`, 'success');
            closeSecureModals();
            
            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡ Ø¯Ø±Ú¯Ø§Ù‡ Ø¨Ø§Ù†Ú©
            setTimeout(() => {
                showSecureAlert('ÙˆØ§Ø±ÛŒØ² Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯', 'success');
            }, 3000);
        }

        // Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¨Ø±Ø¯Ø§Ø´Øª Ø§Ù…Ù†
        function processSecureWithdrawal() {
            const amount = parseInt(document.getElementById('secureWithdrawAmount').value);
            const sheba = document.getElementById('secureShebaNumber').value;
            const password = document.getElementById('withdrawPassword').value;

            if (!amount || amount < 10000) {
                showSecureAlert('Ø­Ø¯Ø§Ù‚Ù„ Ù…Ø¨Ù„Øº Ø¨Ø±Ø¯Ø§Ø´Øª Û±Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù† Ø§Ø³Øª', 'error');
                return;
            }

            if (!sheba || !sheba.startsWith('IR')) {
                showSecureAlert('Ø´Ù…Ø§Ø±Ù‡ Ø´Ø¨Ø§ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª', 'error');
                return;
            }

            if (!password) {
                showSecureAlert('Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            try {
                const result = secureSystem.processWithdrawal(amount, sheba, password);
                showSecureAlert(`Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø±Ø¯Ø§Ø´Øª ${amount.toLocaleString()} ØªÙˆÙ…Ø§Ù† Ø«Ø¨Øª Ø´Ø¯. Ú©Ø¯ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ: ${result.transactionId}`, 'success');
                closeSecureModals();
                
                // Ø¨Ù‡ Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´
                toggleBalance('toman');
            } catch (error) {
                showSecureAlert(error.message, 'error');
            }
        }

        // Ù†Ù…Ø§ÛŒØ´ Ù‡Ø´Ø¯Ø§Ø± Ø§Ù…Ù†
        function showSecureAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `fixed top-4 right-4 p-4 rounded-xl z-50 shadow-2xl ${
                type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'
            }`;
            alertDiv.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-triangle'} ml-2"></i>
                    <span>${message}</span>
                </div>
            `;
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }

        // Ù…Ø­Ø§ÙØ¸Øª Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Ø¯Ø³ØªÚ©Ø§Ø±ÛŒ Ú©Ù†Ø³ÙˆÙ„
        function protectConsole() {
            const originalConsole = console.log;
            console.log = function(...args) {
                if (args.some(arg => 
                    typeof arg === 'string' && 
                    (arg.includes('balance') || arg.includes('password') || arg.includes('secure'))
                )) {
                    console.warn('ğŸš« Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ Ù…Ø­Ø¯ÙˆØ¯ Ø´Ø¯Ù‡ Ø§Ø³Øª');
                    return;
                }
                originalConsole.apply(console, args);
            };
        }

        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', function() {
            protectConsole();
            showSecureAlert('Ø³ÛŒØ³ØªÙ… Ø§Ù…Ù†ÛŒØªÛŒ Ù…Ø§Ù„ÛŒ ÙØ¹Ø§Ù„ Ø´Ø¯', 'success');
        });
    </script>

    <style>
        .page { display: none; }
        .page.active { display: block; }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø§Ù…Ù†ÛŒØªÛŒ */
        @keyframes secure-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .secure-pulse {
            animation: secure-pulse 2s infinite;
        }
    </style>
</body>
</html>
