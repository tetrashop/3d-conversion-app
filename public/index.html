<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D AI Conversion Pro - سیستم تبدیل هوشمند</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gradient-to-br from-gray-900 to-blue-900 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-gray-800/80 backdrop-blur-lg border-b border-blue-500/20 sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-4 space-x-reverse">
                <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl flex items-center justify-center text-white shadow-lg">
                    <i class="fas fa-cube text-xl"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-white">3D AI Conversion Pro</h1>
                    <p class="text-blue-300 text-sm">تبدیل هوشمند 2D به 3D</p>
                </div>
            </div>
            
            <div class="flex space-x-3 space-x-reverse">
                <button onclick="showPage('conversion')" class="nav-btn bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg">
                    <i class="fas fa-magic ml-2"></i>تبدیل فایل
                </button>
                <button onclick="showPage('marketplace')" class="nav-btn bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg">
                    <i class="fas fa-store ml-2"></i>فروشگاه 3D
                </button>
                <button onclick="showPage('wallet')" class="nav-btn bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg">
                    <i class="fas fa-wallet ml-2"></i>کیف پول
                </button>
                <button onclick="showPage('admin-login')" class="nav-btn bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg">
                    <i class="fas fa-shield-alt ml-2"></i>پنل مدیریت
                </button>
            </div>
        </div>
    </nav>

    <!-- سیستم وضعیت آنلاین -->
    <div class="container mx-auto px-4 py-2">
        <div class="bg-green-500/20 border border-green-500/30 rounded-lg p-3 mb-4 backdrop-blur-sm">
            <div class="flex items-center justify-between text-white">
                <div class="flex items-center space-x-2 space-x-reverse">
                    <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                    <span class="font-semibold">سیستم آنلاین</span>
                </div>
                <div class="text-sm">
                    <span class="text-green-300">پردازش ابری فعال | </span>
                    <span id="live-stats" class="text-yellow-300">24 کاربر در حال تبدیل</span>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحات اصلی -->
    <main class="container mx-auto px-4 py-6">
        
        <!-- صفحه تبدیل فایل -->
        <div id="conversion" class="page active">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- پنل آپلود -->
                <div class="lg:col-span-2">
                    <div class="bg-gray-800/50 backdrop-blur-lg rounded-2xl border border-blue-500/20 p-8 shadow-2xl">
                        <h2 class="text-3xl font-bold text-white mb-2">🎯 تبدیل هوشمند 2D به 3D</h2>
                        <p class="text-blue-300 mb-8">تصاویر خود را آپلود کنید و مدل‌های 3D حرفه‌ای دریافت کنید</p>

                        <!-- ناحیه آپلود -->
                        <div id="uploadZone" class="border-2 border-dashed border-blue-400/50 rounded-2xl p-12 text-center mb-8 cursor-pointer hover:border-blue-400 transition-all duration-300 bg-blue-500/10">
                            <i class="fas fa-cloud-upload-alt text-6xl text-blue-400 mb-4"></i>
                            <h3 class="text-xl font-semibold text-white mb-2">فایل‌های خود را اینجا رها کنید</h3>
                            <p class="text-blue-300 mb-4">یا برای انتخاب فایل کلیک کنید</p>
                            <input type="file" id="fileInput" class="hidden" accept=".jpg,.jpeg,.png,.bmp,.webp">
                            <button onclick="document.getElementById('fileInput').click()" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-xl font-semibold transition-all duration-300">
                                <i class="fas fa-folder-open ml-2"></i>انتخاب فایل
                            </button>
                        </div>

                        <!-- پیش‌نمایش فایل -->
                        <div id="filePreview" class="hidden mb-8">
                            <div class="bg-gray-700/50 rounded-2xl p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h4 class="text-lg font-semibold text-white">فایل انتخاب شده</h4>
                                    <button onclick="clearFile()" class="text-red-400 hover:text-red-300">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="flex items-center space-x-4 space-x-reverse">
                                    <img id="previewImage" src="" class="w-20 h-20 object-cover rounded-lg">
                                    <div class="flex-1">
                                        <div class="text-white font-medium" id="fileName"></div>
                                        <div class="text-gray-400 text-sm" id="fileSize"></div>
                                        <div class="w-full bg-gray-600 rounded-full h-2 mt-2">
                                            <div id="uploadProgress" class="bg-green-500 h-2 rounded-full w-0 transition-all duration-500"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- تنظیمات تبدیل -->
                        <div class="bg-gray-700/30 rounded-2xl p-6 mb-8">
                            <h4 class="text-lg font-semibold text-white mb-4">⚙️ تنظیمات تبدیل</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-blue-300 mb-2">کیفیت خروجی</label>
                                    <select id="quality" class="w-full bg-gray-600 border border-gray-500 rounded-xl p-3 text-white">
                                        <option value="low">پایین (سریع) - 5,000 تومان</option>
                                        <option value="medium" selected>متوسط - 15,000 تومان</option>
                                        <option value="high">بالا (حرفه‌ای) - 30,000 تومان</option>
                                        <option value="ultra">فوق حرفه‌ای - 50,000 تومان</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-blue-300 mb-2">فرمت خروجی</label>
                                    <select id="format" class="w-full bg-gray-600 border border-gray-500 rounded-xl p-3 text-white">
                                        <option value="obj">OBJ + MTL</option>
                                        <option value="stl">STL</option>
                                        <option value="fbx">FBX</option>
                                        <option value="gltf">GLTF</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- دکمه شروع تبدیل -->
                        <button id="convertBtn" onclick="startConversion()" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white py-4 rounded-2xl font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed">
                            <i class="fas fa-bolt ml-2"></i>
                            <span id="convertText">شروع تبدیل - 15,000 تومان</span>
                            <div id="convertingSpinner" class="hidden inline-block ml-2">
                                <i class="fas fa-spinner fa-spin"></i>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- پنل جانبی -->
                <div class="space-y-6">
                    <!-- وضعیت حساب -->
                    <div class="bg-gray-800/50 backdrop-blur-lg rounded-2xl border border-purple-500/20 p-6 shadow-2xl">
                        <h3 class="text-xl font-bold text-white mb-4">💰 وضعیت حساب</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-blue-300">اعتبار تومانی:</span>
                                <span class="text-white font-bold" id="balanceToman">125,000 تومان</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-blue-300">BTC:</span>
                                <span class="text-white font-bold" id="balanceBTC">0.0024 BTC</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-blue-300">ETH:</span>
                                <span class="text-white font-bold" id="balanceETH">0.15 ETH</span>
                            </div>
                        </div>
                        <button onclick="showPage('wallet')" class="w-full mt-4 bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-xl font-semibold transition-all duration-300">
                            <i class="fas fa-plus ml-2"></i>افزایش اعتبار
                        </button>
                    </div>

                    <!-- تاریخچه تبدیل‌ها -->
                    <div class="bg-gray-800/50 backdrop-blur-lg rounded-2xl border border-green-500/20 p-6 shadow-2xl">
                        <h3 class="text-xl font-bold text-white mb-4">📊 آخرین تبدیل‌ها</h3>
                        <div class="space-y-3" id="conversionHistory">
                            <!-- دیتای داینامیک -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- سایر صفحات -->
        <div id="marketplace" class="page">
            <!-- محتوای فروشگاه -->
        </div>

        <div id="wallet" class="page">
            <!-- محتوای کیف پول -->
        </div>

        <div id="admin-login" class="page">
            <!-- محتوای لاگین ادمین -->
        </div>

        <!-- صفحه سلامت -->
        <div id="health" class="page">
            <!-- محتوای سلامت -->
        </div>
    </main>

    <!-- اسکریپت‌های پیشرفته -->
    <script>
        // سیستم مدیریت حالت
        const AppState = {
            currentUser: null,
            balance: {
                toman: 125000,
                btc: 0.0024,
                eth: 0.15
            },
            conversions: [],
            currentFile: null
        };

        // مدیریت صفحات
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            updateNavigation(pageId);
        }

        function updateNavigation(activePage) {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'border-blue-400');
            });
        }

        // سیستم آپلود فایل
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                handleFileSelection(file);
            }
        });

        function handleFileSelection(file) {
            if (!file.type.match('image.*')) {
                showNotification('لطفاً فقط فایل تصویری انتخاب کنید', 'error');
                return;
            }

            AppState.currentFile = file;
            const preview = document.getElementById('filePreview');
            const img = document.getElementById('previewImage');
            const fileName = document.getElementById('fileName');
            const fileSize = document.getElementById('fileSize');
            
            // نمایش اطلاعات فایل
            fileName.textContent = file.name;
            fileSize.textContent = formatFileSize(file.size);
            
            // ایجاد پیش‌نمایش تصویر
            const reader = new FileReader();
            reader.onload = function(e) {
                img.src = e.target.result;
                preview.classList.remove('hidden');
                simulateUpload();
            };
            reader.readAsDataURL(file);
        }

        function simulateUpload() {
            const progressBar = document.getElementById('uploadProgress');
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    showNotification('فایل با موفقیت آپلود شد', 'success');
                }
                progressBar.style.width = progress + '%';
            }, 200);
        }

        function clearFile() {
            AppState.currentFile = null;
            document.getElementById('filePreview').classList.add('hidden');
            document.getElementById('fileInput').value = '';
        }

        // سیستم تبدیل فایل
        async function startConversion() {
            if (!AppState.currentFile) {
                showNotification('لطفاً ابتدا یک فایل انتخاب کنید', 'error');
                return;
            }

            const convertBtn = document.getElementById('convertBtn');
            const convertText = document.getElementById('convertText');
            const spinner = document.getElementById('convertingSpinner');

            // غیرفعال کردن دکمه
            convertBtn.disabled = true;
            convertText.textContent = 'در حال تبدیل...';
            spinner.classList.remove('hidden');

            try {
                // شبیه‌سازی پردازش هوش مصنوعی
                await simulateAIProcessing();
                
                // کسر هزینه
                const cost = calculateCost();
                if (!processPayment(cost)) {
                    throw new Error('موجودی کافی نیست');
                }

                // نمایش نتیجه
                showConversionResult();
                showNotification('تبدیل با موفقیت انجام شد!', 'success');
                
            } catch (error) {
                showNotification(error.message, 'error');
            } finally {
                // بازگردانی دکمه
                convertBtn.disabled = false;
                convertText.textContent = 'شروع تبدیل - ' + calculateCost().toLocaleString() + ' تومان';
                spinner.classList.add('hidden');
            }
        }

        function simulateAIProcessing() {
            return new Promise((resolve) => {
                // شبیه‌سازی پردازش با زمان‌بندی واقعی
                const steps = [
                    'آنالیز تصویر...',
                    'تشخیص عمق...',
                    'ساخت مش سه‌بعدی...',
                    'بهینه‌سازی مدل...',
                    'اعمال بافت...'
                ];
                
                let currentStep = 0;
                const interval = setInterval(() => {
                    if (currentStep < steps.length) {
                        showNotification(steps[currentStep], 'info');
                        currentStep++;
                    } else {
                        clearInterval(interval);
                        resolve();
                    }
                }, 1500);
            });
        }

        function calculateCost() {
            const quality = document.getElementById('quality').value;
            const prices = {
                low: 5000,
                medium: 15000,
                high: 30000,
                ultra: 50000
            };
            return prices[quality] || 15000;
        }

        function processPayment(amount) {
            if (AppState.balance.toman >= amount) {
                AppState.balance.toman -= amount;
                updateBalanceDisplay();
                return true;
            }
            return false;
        }

        function updateBalanceDisplay() {
            document.getElementById('balanceToman').textContent = 
                AppState.balance.toman.toLocaleString() + ' تومان';
            document.getElementById('balanceBTC').textContent = 
                AppState.balance.btc + ' BTC';
            document.getElementById('balanceETH').textContent = 
                AppState.balance.eth + ' ETH';
        }

        // ابزارهای کمکی
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function showNotification(message, type = 'info') {
            // ایجاد نوتیفیکیشن زیبا
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-2xl shadow-2xl z-50 transform transition-all duration-500 ${
                type === 'error' ? 'bg-red-500/90 border border-red-400' :
                type === 'success' ? 'bg-green-500/90 border border-green-400' :
                'bg-blue-500/90 border border-blue-400'
            }`;
            notification.innerHTML = `
                <div class="flex items-center space-x-2 space-x-reverse">
                    <i class="fas fa-${
                        type === 'error' ? 'exclamation-triangle' :
                        type === 'success' ? 'check-circle' : 'info-circle'
                    }"></i>
                    <span class="text-white font-medium">${message}</span>
                </div>
            `;
            document.body.appendChild(notification);
            
            // حذف خودکار
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // سیستم آپدیت زنده
        function updateLiveStats() {
            const users = Math.floor(20 + Math.random() * 15);
            document.getElementById('live-stats').textContent = 
                `${users} کاربر در حال تبدیل`;
        }

        // مقداردهی اولیه
        document.addEventListener('DOMContentLoaded', function() {
            updateBalanceDisplay();
            setInterval(updateLiveStats, 5000);
            showPage('conversion');
        });
    </script>
</body>
                        </html>
