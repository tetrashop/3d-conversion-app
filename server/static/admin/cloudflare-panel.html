<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پنل مدیریت - سرویس تبدیل 3D</title>
    <style>
        /* استایل‌های قبلی را اینجا کپی کنید */
        :root {
            --primary: #3498db;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --info: #17a2b8;
            --dark: #2c3e50;
            --light: #ecf0f1;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* بقیه استایل‌ها مانند قبل */
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- محتوای پنل مانند قبل -->
    </div>

    <script>
        // API Base URL برای Cloudflare
        const API_BASE = '/api';
        
        // داده‌های اولیه
        let dashboardData = {
            netProfit: 0,
            totalRevenue: 0,
            activeUsers: 0,
            conversionRate: 0,
            availableBalance: 0,
            transactions: []
        };

        // توابع API برای Cloudflare
        async function fetchStats() {
            try {
                const response = await fetch(`${API_BASE}/stats`);
                const data = await response.json();
                
                if (data.success) {
                    return data.data;
                }
                throw new Error(data.error);
            } catch (error) {
                console.error('Error fetching stats:', error);
                // استفاده از داده‌های دمو در صورت خطا
                return {
                    totalRevenue: 1250.50,
                    totalProfit: 375.15,
                    totalTransactions: 8,
                    activeUsers: 47,
                    conversionRate: 12.5,
                    todayTransactions: 2
                };
            }
        }

        async function fetchTransactions() {
            try {
                const response = await fetch(`${API_BASE}/transactions`);
                const data = await response.json();
                
                if (data.success) {
                    return data.data;
                }
                throw new Error(data.error);
            } catch (error) {
                console.error('Error fetching transactions:', error);
                return [];
            }
        }

        async function submitTransaction(transactionData) {
            try {
                const response = await fetch(`${API_BASE}/transactions`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(transactionData)
                });
                
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error submitting transaction:', error);
                throw error;
            }
        }

        async function submitWithdrawal(withdrawalData) {
            try {
                const response = await fetch(`${API_BASE}/withdrawals`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(withdrawalData)
                });
                
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error submitting withdrawal:', error);
                throw error;
            }
        }

        // بقیه توابع JavaScript مانند قبل
        // ...
    </script>
</body>
</html>
